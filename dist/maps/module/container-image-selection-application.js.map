{"version":3,"sources":["module/container-image-selection-application.ts"],"names":[],"mappings":"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","file":"../../module/container-image-selection-application.js","sourcesContent":["import { log } from '../main';\nimport { updateItem } from './mainEntry';\nimport { PICK_UP_STIX_MODULE_NAME } from './settings';\n\n/**\n * Application class to display to select an item that the token is\n * associated with\n */\nexport default class ContainerImageSelectionApplication extends FormApplication {\n  static get defaultOptions() {\n    return mergeObject(super.defaultOptions, {\n      closeOnSubmit: false,\n      submitOnChange: true,\n      id: 'pick-up-stix-container-image-selection',\n      template: `/modules/${PICK_UP_STIX_MODULE_NAME}/templates/container-image-selection.html`,\n      height: 'auto',\n      width: 'auto',\n      minimizable: false,\n      title: `Choose Container Images`,\n    });\n  }\n\n  private _html: any;\n\n  constructor(private _item: Item) {\n    super(_item);\n    log(` ContainerImageSelectionApplication ${this.appId} | constructed with args:`);\n    log([this._item]);\n  }\n\n  activateListeners(html) {\n    log(` ContainerImageSelectionApplication ${this.appId} | activateListeners called with args:`);\n    log([html]);\n\n    this._html = html;\n    super.activateListeners(this._html);\n\n    $(html).find('img').css('max-width', '160px').css('height', '160px').first().css('margin-right', '20px');\n\n    $(html).find('img').on('click', this._onClickImage);\n\n    $(html).find('h2').css('font-family', `\"Modesto Condensed\", \"Palatino Linotype\", serif`);\n  }\n\n  getData() {\n    const data = {\n      data: this._item.data,\n    };\n    log(data);\n    return <any>data;\n  }\n\n  protected _onClickImage = (e) => {\n    const attr = e.currentTarget.dataset.edit;\n    const current = getProperty(this._item.data, `flags.pick-up-stix.pick-up-stix.${attr}`);\n    new FilePicker({\n      type: 'image',\n      current,\n      callback: (path) => {\n        e.currentTarget.src = path;\n        this._onSubmit(e);\n      },\n      top: <number>this.position.top + 40,\n      left: <number>this.position.left + 10,\n    }).browse(current);\n  };\n\n  async _updateObject(e, formData) {\n    log(` ContainerImageSelectionApplication ${this.appId} | _updateObject`);\n    log([e, formData]);\n\n    await updateItem((<Item>this.object).id, {\n      flags: {\n        'pick-up-stix': {\n          'pick-up-stix': {\n            container: {\n              ...formData,\n            },\n          },\n        },\n      },\n    });\n  }\n}\n"]}