{"version":3,"sources":["module/container-image-selection-application.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,GAAG,EAAE,mBAAgB;AAC9B,OAAO,EAAE,UAAU,EAAE,uBAAoB;AACzC,OAAO,EAAE,wBAAwB,EAAE,sBAAmB;AAEtD;;;GAGG;AACH,MAAM,CAAC,OAAO,OAAO,kCAAmC,SAAQ,eAAe;IAiB9E,YAAoB,KAAW;QAC9B,KAAK,CAAC,KAAK,CAAC,CAAC;QADM,UAAK,GAAL,KAAK,CAAM;QAqCpB,kBAAa,GAAG,CAAC,CAAC,EAAE,EAAE;YAC9B,MAAM,IAAI,GAAG,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC;YAC1C,MAAM,OAAO,GAAG,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,mCAAmC,IAAI,EAAE,CAAC,CAAC;YACxF,IAAI,UAAU,CAAC;gBACb,IAAI,EAAE,OAAO;gBACb,OAAO;gBACP,QAAQ,EAAE,IAAI,CAAC,EAAE;oBACf,CAAC,CAAC,aAAa,CAAC,GAAG,GAAG,IAAI,CAAC;oBAC3B,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBACpB,CAAC;gBACD,GAAG,EAAU,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,EAAE;gBACnC,IAAI,EAAU,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,EAAE;aACtC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACrB,CAAC,CAAA;QAhDD,GAAG,CAAC,uCAAuC,IAAI,CAAC,KAAK,2BAA2B,CAAC,CAAA;QACjF,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;IACnB,CAAC;IAnBD,MAAM,KAAK,cAAc;QACtB,OAAO,WAAW,CAAC,KAAK,CAAC,cAAc,EAAE;YACvC,aAAa,EAAE,KAAK;YACpB,cAAc,EAAE,IAAI;YACpB,EAAE,EAAE,wCAAwC;YAC7C,QAAQ,EAAE,YAAY,wBAAwB,2CAA2C;YACxF,MAAM,EAAE,MAAM;YACd,KAAK,EAAE,MAAM;YACf,WAAW,EAAE,KAAK;YAChB,KAAK,EAAE,yBAAyB;SACjC,CAAC,CAAC;IACN,CAAC;IAUD,iBAAiB,CAAC,IAAI;QACnB,GAAG,CAAC,uCAAuC,IAAI,CAAC,KAAK,wCAAwC,CAAC,CAAC;QACjG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;QAEV,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAEpC,CAAC,CAAC,IAAI,CAAC;aACJ,IAAI,CAAC,KAAK,CAAC;aACX,GAAG,CAAC,WAAW,EAAE,OAAO,CAAC;aACzB,GAAG,CAAC,QAAQ,EAAE,OAAO,CAAC;aACtB,KAAK,EAAE;aACP,GAAG,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;QAE/B,CAAC,CAAC,IAAI,CAAC;aACJ,IAAI,CAAC,KAAK,CAAC;aACX,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAEnC,CAAC,CAAC,IAAI,CAAC;aACJ,IAAI,CAAC,IAAI,CAAC;aACV,GAAG,CAAC,aAAa,EAAE,iDAAiD,CAAC,CAAC;IAC5E,CAAC;IAED,OAAO;QACJ,MAAM,IAAI,GAAG;YACX,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI;SACtB,CAAA;QACD,GAAG,CAAC,IAAI,CAAC,CAAC;QACV,OAAY,IAAI,CAAC;IACnB,CAAC;IAiBD,KAAK,CAAC,aAAa,CAAC,CAAC,EAAE,QAAQ;QAC7B,GAAG,CAAC,uCAAuC,IAAI,CAAC,KAAK,kBAAkB,CAAC,CAAC;QACzE,GAAG,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC;QAEnB,MAAM,UAAU,CAAQ,IAAI,CAAC,MAAO,CAAC,EAAE,EAAE;YACvC,OAAO,EAAE;gBACP,cAAc,EAAE;oBACd,cAAc,EAAE;wBACd,SAAS,EAAE;4BACT,GAAG,QAAQ;yBACZ;qBACF;iBACF;aACF;SACF,CAAC,CAAC;IACL,CAAC;CACF","file":"../../module/container-image-selection-application.js","sourcesContent":["import { log } from \"../main\";\r\nimport { updateItem } from \"./mainEntry\";\r\nimport { PICK_UP_STIX_MODULE_NAME } from \"./settings\";\r\n\r\n/**\r\n * Application class to display to select an item that the token is\r\n * associated with\r\n */\r\nexport default class ContainerImageSelectionApplication extends FormApplication {\r\n\r\n\tstatic get defaultOptions() {\r\n    return mergeObject(super.defaultOptions, {\r\n      closeOnSubmit: false,\r\n      submitOnChange: true,\r\n      id: \"pick-up-stix-container-image-selection\",\r\n\t    template: `/modules/${PICK_UP_STIX_MODULE_NAME}/templates/container-image-selection.html`,\r\n      height: 'auto',\r\n      width: 'auto',\r\n\t\t  minimizable: false,\r\n      title: `Choose Container Images`\r\n    });\r\n\t}\r\n\r\n\tprivate _html: any;\r\n\r\n\tconstructor(private _item: Item) {\r\n\t\tsuper(_item);\r\n\t\tlog(` ContainerImageSelectionApplication ${this.appId} | constructed with args:`)\r\n\t\tlog([this._item]);\r\n\t}\r\n\r\n\tactivateListeners(html) {\r\n    log(` ContainerImageSelectionApplication ${this.appId} | activateListeners called with args:`);\r\n\t\tlog([html]);\r\n\r\n    this._html = html;\r\n    super.activateListeners(this._html);\r\n\r\n    $(html)\r\n      .find('img')\r\n      .css('max-width', '160px')\r\n      .css('height', '160px')\r\n      .first()\r\n      .css('margin-right', '20px');\r\n\r\n    $(html)\r\n      .find('img')\r\n      .on('click', this._onClickImage);\r\n\r\n    $(html)\r\n      .find('h2')\r\n      .css('font-family', `\"Modesto Condensed\", \"Palatino Linotype\", serif`);\r\n\t}\r\n\r\n\tgetData() {\r\n    const data = {\r\n      data: this._item.data\r\n    }\r\n    log(data);\r\n    return <any>data;\r\n  }\r\n\r\n  protected _onClickImage = (e) => {\r\n    const attr = e.currentTarget.dataset.edit;\r\n    const current = getProperty(this._item.data, `flags.pick-up-stix.pick-up-stix.${attr}`);\r\n    new FilePicker({\r\n      type: \"image\",\r\n      current,\r\n      callback: path => {\r\n        e.currentTarget.src = path;\r\n        this._onSubmit(e);\r\n      },\r\n      top: <number>this.position.top + 40,\r\n      left: <number>this.position.left + 10\r\n    }).browse(current);\r\n  }\r\n\r\n  async _updateObject(e, formData) {\r\n    log(` ContainerImageSelectionApplication ${this.appId} | _updateObject`);\r\n    log([e, formData]);\r\n\r\n    await updateItem((<Item>this.object).id, {\r\n      'flags': {\r\n        'pick-up-stix': {\r\n          'pick-up-stix': {\r\n            container: {\r\n              ...formData\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n"]}