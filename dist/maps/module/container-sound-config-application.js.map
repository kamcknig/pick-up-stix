{"version":3,"sources":["module/container-sound-config-application.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,GAAG,EAAE,mBAAgB;AAE9B,OAAO,EAAE,UAAU,EAAE,uBAAoB;AACzC,OAAO,EAAE,iBAAiB,EAAE,wBAAwB,EAAE,sBAAmB;AAEzE,MAAM,OAAO,oBAAqB,SAAQ,eAAe;IAEvD,MAAM,KAAK,cAAc;QACvB,OAAO,WAAW,CAAC,KAAK,CAAC,cAAc,EAAE;YACvC,OAAO,EAAE,CAAC,cAAc,EAAE,8BAA8B,CAAC;YACzD,aAAa,EAAE,KAAK;YACpB,MAAM,EAA6B,MAAM;YACzC,EAAE,EAAE,qCAAqC;YACzC,WAAW,EAAE,KAAK;YAClB,SAAS,EAAE,KAAK;YAChB,cAAc,EAAE,IAAI;YACpB,aAAa,EAAE,IAAI;YACnB,KAAK,EAAE,GAAG;YACV,QAAQ,EAAE,YAAY,wBAAwB,wCAAwC;YACtF,KAAK,EAAE,4BAA4B;SACpC,CAAC,CAAA;IACJ,CAAC;IAED,YAAY,MAAM,EAAE,OAAO;QACzB,KAAK,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;IACzB,CAAC;IAES,eAAe,CAAC,CAAC;QACzB,IAAI,UAAU,CAAC;YACb,IAAI,EAAE,OAAO;YACb,OAAO,EAAiB,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,wBAAwB,EAAE,gBAAgB,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;YACtH,QAAQ,EAAE,IAAI,CAAC,EAAE;gBACf,CAAC,CAAC,aAAa,CAAC,GAAG,GAAG,IAAI,CAAC;gBAC3B,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YACpB,CAAC;SACF,CAAC,CAAA;IACJ,CAAC;IAED,KAAK,CAAC,aAAa,CAAC,CAAC,EAAE,QAAQ;QAC7B,GAAG,CAAC,oCAAoC,IAAI,CAAC,KAAK,kBAAkB,CAAC,CAAC;QACtE,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;QAEhB,MAAM,KAAK,GAAyB,SAAS,CAAQ,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,wBAAwB,EAAE,iBAAiB,CAAC,CAAC,CAAC;QAExH,MAAM,UAAU,CAAQ,IAAI,CAAC,MAAO,CAAC,EAAE,EAAE;YACvC,KAAK,EAAE;gBACL,cAAc,EAAE;oBACd,cAAc,EAAE;wBACd,SAAS,EAAE;4BACT,GAAG,QAAQ;yBACZ;qBACF;iBACF;aACF;SACF,CAAC,CAAC;IACL,CAAC;IAED,OAAO,CAAC,OAAO;QACb,GAAG,CAAC,oCAAoC,IAAI,CAAC,KAAK,YAAY,CAAC,CAAC;QAChE,MAAM,IAAI,GAAG;YACX,aAAa,EAAqB,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,wBAAwB,EAAE,iBAAiB,CAAE,CAAC,SAAS,EAAE,aAAa,IAAI,EAAE;YACnI,cAAc,EAAqB,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,wBAAwB,EAAE,iBAAiB,CAAE,CAAC,SAAS,EAAE,cAAc,IAAI,EAAE;SACtI,CAAA;QACD,GAAG,CAAC,IAAI,CAAC,CAAC;QACV,OAAY,IAAI,CAAC;IACnB,CAAC;CACF","file":"../../module/container-sound-config-application.js","sourcesContent":["import { log } from '../main';\r\nimport { ItemFlags } from \"./loot-token\";\r\nimport { updateItem } from \"./mainEntry\";\r\nimport { PICK_UP_STIX_FLAG, PICK_UP_STIX_MODULE_NAME } from './settings';\r\n\r\nexport class ContainerSoundConfig extends FormApplication {\r\n\r\n  static get defaultOptions() {\r\n    return mergeObject(super.defaultOptions, {\r\n      classes: ['pick-up-stix', 'container-sound-config-sheet'],\r\n      closeOnSubmit: false,\r\n      height: <string | undefined | null>'auto',\r\n      id: 'pick-up-stix-container-config-sheet',\r\n      minimizable: false,\r\n      resizable: false,\r\n      submitOnChange: true,\r\n      submitOnClose: true,\r\n      width: 350,\r\n      template: `/modules/${PICK_UP_STIX_MODULE_NAME}/templates/container-sound-config.html`,\r\n      title: 'Configure Container Sounds'\r\n    })\r\n  }\r\n\r\n  constructor(object, options) {\r\n    super(object, options);\r\n  }\r\n\r\n  protected _openFilePicker(e): void {\r\n    new FilePicker({\r\n      type: \"audio\",\r\n      current: <string>(<Item>this.object).getFlag(PICK_UP_STIX_MODULE_NAME, `pick-up-stix.${e.currentTarget.dataset.edit}`),\r\n      callback: path => {\r\n        e.currentTarget.src = path;\r\n        this._onSubmit(e);\r\n      }\r\n    })\r\n  }\r\n\r\n  async _updateObject(e, formData) {\r\n    log(` ContainerSoundConfigApplication ${this.appId} | _updateObject`);\r\n    log([formData]);\r\n\r\n    const flags: ItemFlags = <ItemFlags>duplicate((<Item>this.object).getFlag(PICK_UP_STIX_MODULE_NAME, PICK_UP_STIX_FLAG));\r\n\r\n    await updateItem((<Item>this.object).id, {\r\n      flags: {\r\n        'pick-up-stix': {\r\n          'pick-up-stix': {\r\n            container: {\r\n              ...formData\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  getData(options) {\r\n    log(` ContainerSoundConfigApplication ${this.appId} | getData`);\r\n    const data = {\r\n      openSoundPath: (<ItemFlags>(<Item>this.object).getFlag(PICK_UP_STIX_MODULE_NAME, PICK_UP_STIX_FLAG)).container?.soundOpenPath ?? '',\r\n      closeSoundPath: (<ItemFlags>(<Item>this.object).getFlag(PICK_UP_STIX_MODULE_NAME, PICK_UP_STIX_FLAG)).container?.soundClosePath ?? ''\r\n    }\r\n    log(data);\r\n    return <any>data;\r\n  }\r\n}\r\n"]}