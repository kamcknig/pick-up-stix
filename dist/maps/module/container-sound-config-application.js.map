{"version":3,"sources":["module/container-sound-config-application.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,GAAG,EAAE,mBAAgB;AAE9B,OAAO,EAAE,UAAU,EAAE,uBAAoB;AACzC,OAAO,EAAE,iBAAiB,EAAE,wBAAwB,EAAE,sBAAmB;AAEzE,MAAM,OAAO,oBAAqB,SAAQ,eAAe;IACvD,MAAM,KAAK,cAAc;QACvB,OAAO,WAAW,CAAC,KAAK,CAAC,cAAc,EAAE;YACvC,OAAO,EAAE,CAAC,cAAc,EAAE,8BAA8B,CAAC;YACzD,aAAa,EAAE,KAAK;YACpB,MAAM,EAA6B,MAAM;YACzC,EAAE,EAAE,qCAAqC;YACzC,WAAW,EAAE,KAAK;YAClB,SAAS,EAAE,KAAK;YAChB,cAAc,EAAE,IAAI;YACpB,aAAa,EAAE,IAAI;YACnB,KAAK,EAAE,GAAG;YACV,QAAQ,EAAE,YAAY,wBAAwB,wCAAwC;YACtF,KAAK,EAAE,4BAA4B;SACpC,CAAC,CAAC;IACL,CAAC;IAED,YAAY,MAAM,EAAE,OAAO;QACzB,KAAK,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;IACzB,CAAC;IAES,eAAe,CAAC,CAAC;QACzB,IAAI,UAAU,CAAC;YACb,IAAI,EAAE,OAAO;YACb,OAAO,EAAU,CACR,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,wBAAwB,EAAE,gBAAgB,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CACtG;YACD,QAAQ,EAAE,CAAC,IAAI,EAAE,EAAE;gBACjB,CAAC,CAAC,aAAa,CAAC,GAAG,GAAG,IAAI,CAAC;gBAC3B,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YACpB,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAED,KAAK,CAAC,aAAa,CAAC,CAAC,EAAE,QAAQ;QAC7B,GAAG,CAAC,oCAAoC,IAAI,CAAC,KAAK,kBAAkB,CAAC,CAAC;QACtE,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;QAEhB,MAAM,KAAK,GAAyB,CAClC,SAAS,CAAQ,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,wBAAwB,EAAE,iBAAiB,CAAC,CAAC,CACpF,CAAC;QAEF,MAAM,UAAU,CAAQ,IAAI,CAAC,MAAO,CAAC,EAAE,EAAE;YACvC,KAAK,EAAE;gBACL,cAAc,EAAE;oBACd,cAAc,EAAE;wBACd,SAAS,EAAE;4BACT,GAAG,QAAQ;yBACZ;qBACF;iBACF;aACF;SACF,CAAC,CAAC;IACL,CAAC;IAED,OAAO,CAAC,OAAO;QACb,GAAG,CAAC,oCAAoC,IAAI,CAAC,KAAK,YAAY,CAAC,CAAC;QAChE,MAAM,IAAI,GAAG;YACX,aAAa,EACQ,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,wBAAwB,EAAE,iBAAiB,CAAE,CAAC,SAAS;gBAC7F,EAAE,aAAa,IAAI,EAAE;YACzB,cAAc,EACO,IAAI,CAAC,MAAO,CAAC,OAAO,CAAC,wBAAwB,EAAE,iBAAiB,CAAE,CAAC,SAAS;gBAC7F,EAAE,cAAc,IAAI,EAAE;SAC3B,CAAC;QACF,GAAG,CAAC,IAAI,CAAC,CAAC;QACV,OAAY,IAAI,CAAC;IACnB,CAAC;CACF","file":"../../module/container-sound-config-application.js","sourcesContent":["import { log } from '../main';\nimport { ItemFlags } from './loot-token';\nimport { updateItem } from './mainEntry';\nimport { PICK_UP_STIX_FLAG, PICK_UP_STIX_MODULE_NAME } from './settings';\n\nexport class ContainerSoundConfig extends FormApplication {\n  static get defaultOptions() {\n    return mergeObject(super.defaultOptions, {\n      classes: ['pick-up-stix', 'container-sound-config-sheet'],\n      closeOnSubmit: false,\n      height: <string | undefined | null>'auto',\n      id: 'pick-up-stix-container-config-sheet',\n      minimizable: false,\n      resizable: false,\n      submitOnChange: true,\n      submitOnClose: true,\n      width: 350,\n      template: `/modules/${PICK_UP_STIX_MODULE_NAME}/templates/container-sound-config.html`,\n      title: 'Configure Container Sounds',\n    });\n  }\n\n  constructor(object, options) {\n    super(object, options);\n  }\n\n  protected _openFilePicker(e): void {\n    new FilePicker({\n      type: 'audio',\n      current: <string>(\n        (<Item>this.object).getFlag(PICK_UP_STIX_MODULE_NAME, `pick-up-stix.${e.currentTarget.dataset.edit}`)\n      ),\n      callback: (path) => {\n        e.currentTarget.src = path;\n        this._onSubmit(e);\n      },\n    });\n  }\n\n  async _updateObject(e, formData) {\n    log(` ContainerSoundConfigApplication ${this.appId} | _updateObject`);\n    log([formData]);\n\n    const flags: ItemFlags = <ItemFlags>(\n      duplicate((<Item>this.object).getFlag(PICK_UP_STIX_MODULE_NAME, PICK_UP_STIX_FLAG))\n    );\n\n    await updateItem((<Item>this.object).id, {\n      flags: {\n        'pick-up-stix': {\n          'pick-up-stix': {\n            container: {\n              ...formData,\n            },\n          },\n        },\n      },\n    });\n  }\n\n  getData(options) {\n    log(` ContainerSoundConfigApplication ${this.appId} | getData`);\n    const data = {\n      openSoundPath:\n        (<ItemFlags>(<Item>this.object).getFlag(PICK_UP_STIX_MODULE_NAME, PICK_UP_STIX_FLAG)).container\n          ?.soundOpenPath ?? '',\n      closeSoundPath:\n        (<ItemFlags>(<Item>this.object).getFlag(PICK_UP_STIX_MODULE_NAME, PICK_UP_STIX_FLAG)).container\n          ?.soundClosePath ?? '',\n    };\n    log(data);\n    return <any>data;\n  }\n}\n"]}