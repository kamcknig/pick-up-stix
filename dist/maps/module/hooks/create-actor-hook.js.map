{"version":3,"sources":["module/hooks/create-actor-hook.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,GAAG,EAAE,sBAAmB;AACjC,OAAO,EAAE,UAAU,EAAE,oBAAiB;AACtC,OAAO,EAAE,eAAe,EAAE,wBAAqB;AAE/C,MAAM,CAAC,MAAM,eAAe,GAAG,KAAK,EAAE,KAAY,EAAE,MAAc,EAAE,EAAE;IACpE,GAAG,CAAC,sCAAsC,CAAC,CAAC;IAC5C,GAAG,CAAC,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC;IACrB,MAAM,OAAO,GAAG;QACd,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;YACxD,GAAG,EAAE,SAAS,CAAC,EAAE;YACjB,KAAK,EAAE;gBACL,cAAc,EAAE;oBACd,cAAc,EAAE;wBACd,KAAK,EAAE,KAAK,CAAC,EAAE;qBAChB;iBACF;aACF;SACF,CAAC,CAAC;KACJ,CAAC;IAEF,IAAI,CAAC,UAAU,EAAE,EAAE;QACjB,GAAG,CAAC,yCAAyC,CAAC,CAAC;QAC/C,OAAO;KACR;IAED,MAAM,eAAe,CAAC,KAAK,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;AAC3C,CAAC,CAAC","file":"../../../module/hooks/create-actor-hook.js","sourcesContent":["import { log } from '../../main';\nimport { amIFirstGm } from '../utils';\nimport { updateOwnedItem } from '../mainEntry';\n\nexport const createActorHook = async (actor: Actor, userId: string) => {\n  log(` createActorHook | called with args:`);\n  log([actor, userId]);\n  const updates = [\n    ...Object.values(actor.items.entries).map((ownedItem) => ({\n      _id: ownedItem.id,\n      flags: {\n        'pick-up-stix': {\n          'pick-up-stix': {\n            owner: actor.id,\n          },\n        },\n      },\n    })),\n  ];\n\n  if (!amIFirstGm()) {\n    log(` createActorHook | User is not first GM`);\n    return;\n  }\n\n  await updateOwnedItem(actor.id, updates);\n};\n"]}