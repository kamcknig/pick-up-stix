{"version":3,"sources":["module/hooks/delete-item-hook.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,GAAG,EAAE,sBAAmB;AACjC,OAAO,EAAE,UAAU,EAAE,oBAAiB;AACtC,OAAO,EAAE,WAAW,EAAE,YAAY,EAAE,wBAAqB;AAEzD,MAAM,CAAC,MAAM,cAAc,GAAG,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;IAC5D,GAAG,CAAC,kBAAkB,CAAC,CAAC;IACxB,GAAG,CAAC,CAAC,IAAI,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC,CAAC;IAE7B,IAAI,CAAC,UAAU,EAAE,EAAE;QACjB,GAAG,CAAC,wCAAwC,CAAC,CAAC;QAC9C,OAAO;KACR;IAED,MAAM,GAAG,GAAG,YAAY,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;IAE9C,KAAK,IAAI,SAAS,IAAI,GAAG,EAAE;QACzB,MAAM,WAAW,CAAC,SAAS,CAAC,OAAO,EAAE,SAAS,CAAC,OAAO,CAAC,CAAC;KACzD;AACH,CAAC,CAAC","file":"../../../module/hooks/delete-item-hook.js","sourcesContent":["import { log } from '../../main';\r\nimport { amIFirstGm } from \"../utils\";\r\nimport { deleteToken, getLootToken } from \"../mainEntry\";\r\n\r\nexport const deleteItemHook = async (item, options, userId) => {\r\n  log(` deleteItemHook:`);\r\n  log([item, options, userId]);\r\n\r\n  if (!amIFirstGm()) {\r\n    log(` deleteItemHook | User is not first GM`);\r\n    return;\r\n  }\r\n\r\n  const lts = getLootToken({ itemId: item.id });\r\n\r\n  for (let lootToken of lts) {\r\n    await deleteToken(lootToken.tokenId, lootToken.sceneId);\r\n  }\r\n};\r\n"]}