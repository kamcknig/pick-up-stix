{"version":3,"sources":["module/hooks/pre-update-item-hook.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,GAAG,EAAE,sBAAmB;AAEjC,OAAO,EAAE,QAAQ,EAAE,qBAAkB;AACrC,OAAO,EAAE,iBAAiB,EAAE,wBAAwB,EAAE,uBAAoB;AAE1E,MAAM,CAAC,MAAM,iBAAiB,GAAG,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;IACrE,GAAG,CAAC,qBAAqB,CAAC,CAAC;IAC3B,GAAG,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC,CAAC;IAEnC,MAAM,SAAS,GAAc,IAAI,CAAC,OAAO,CAAC,wBAAwB,EAAE,iBAAiB,CAAC,CAAC;IAEvF,IAAI,SAAS,EAAE,QAAQ,KAAK,QAAQ,CAAC,SAAS,EAAE;QAC9C,IAAI,CAAC,GAAG,GAAG,IAAI,EAAE,KAAK,EAAE,CAAC,wBAAwB,CAAC,EAAE,CAAC,iBAAiB,CAAC,EAAE,SAAS,CAAC,cAAc,IAAI,SAAS,CAAC,SAAS,EAAE,cAAc,CAAC;QACzI,WAAW,CAAC,IAAI,EAAE,+CAA+C,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;KAC9E;AACH,CAAC,CAAA","file":"../../../module/hooks/pre-update-item-hook.js","sourcesContent":["import { log } from '../../main';\r\nimport { ItemFlags } from \"../loot-token\";\r\nimport { ItemType } from \"../models\";\r\nimport { PICK_UP_STIX_FLAG, PICK_UP_STIX_MODULE_NAME } from '../settings';\r\n\r\nexport const preUpdateItemHook = async (item, data, options, userId) => {\r\n  log(` preUpdateItemHook:`);\r\n  log([item, data, options, userId]);\r\n\r\n  const itemFlags: ItemFlags = item.getFlag(PICK_UP_STIX_MODULE_NAME, PICK_UP_STIX_FLAG);\r\n\r\n  if (itemFlags?.itemType === ItemType.CONTAINER) {\r\n    data.img = data?.flags?.[PICK_UP_STIX_MODULE_NAME]?.[PICK_UP_STIX_FLAG]?.container.imageClosePath ?? itemFlags.container?.imageClosePath;\r\n    setProperty(data, 'flags.pick-up-stix.pick-up-stix.tokenData.img', data.img);\r\n  }\r\n}\r\n"]}