{"version":3,"sources":["module/pick-up-stix/container-image-selection-application.ts"],"names":[],"mappings":"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","file":"../../../module/pick-up-stix/container-image-selection-application.js","sourcesContent":["import { log } from \"../../log\";\nimport {\n  updateItem\n} from \"./main\";\n\n/**\n * Application class to display to select an item that the token is\n * associated with\n */\nexport default class ContainerImageSelectionApplication extends FormApplication {\n\n\tstatic get defaultOptions(): FormApplication.Options {\n    return mergeObject(super.defaultOptions, {\n      closeOnSubmit: false,\n      submitOnChange: true,\n      id: \"pick-up-stix-container-image-selection\",\n\t    template: \"modules/pick-up-stix/module/pick-up-stix/templates/container-image-selection.html\",\n      height: 'auto',\n      //@ts-ignore\n      width: 'auto',\n\t\t  minimizable: false,\n      title: `Choose Container Images`\n    });\n\t}\n\n\tprivate _html: any;\n\n\tconstructor(private _item: Item) {\n\t\tsuper(_item);\n\t\tlog(`pick-up-stix | ContainerImageSelectionApplication ${this.appId} | constructed with args:`)\n\t\tlog([this._item]);\n\t}\n\n\tactivateListeners(html) {\n    log(`pick-up-stix | ContainerImageSelectionApplication ${this.appId} | activateListeners called with args:`);\n\t\tlog([html]);\n\n    this._html = html;\n    super.activateListeners(this._html);\n\n    $(html)\n      .find('img')\n      .css('max-width', '160px')\n      .css('height', '160px')\n      .first()\n      .css('margin-right', '20px');\n\n    $(html)\n      .find('img')\n      .on('click', this._onClickImage);\n\n    $(html)\n      .find('h2')\n      .css('font-family', `\"Modesto Condensed\", \"Palatino Linotype\", serif`);\n\t}\n\n\tgetData():any {\n    const data = {\n      data: this._item.data\n    }\n    log(data);\n    return data;\n  }\n\n  protected _onClickImage = (e) => {\n    const attr = e.currentTarget.dataset.edit;\n    const current = getProperty(this._item.data, `flags.pick-up-stix.pick-up-stix.${attr}`);\n    new FilePicker({\n      type: \"image\",\n      current,\n      //@ts-ignore\n      callback: (path) => {\n        e.currentTarget.src = path;\n        this._onSubmit(e);\n      },\n      //@ts-ignore\n      top: this.position.top + 40,\n      //@ts-ignore\n      left: this.position.left + 10\n    }).browse(current);\n  }\n\n  async _updateObject(e, formData) {\n    log(`pick-up-stix | ContainerImageSelectionApplication ${this.appId} | _updateObject`);\n    log([e, formData]);\n    //@ts-ignore\n    await updateItem(this.object.id, {\n      'flags': {\n        'pick-up-stix': {\n          'pick-up-stix': {\n            container: {\n              ...formData\n            }\n          }\n        }\n      }\n    });\n  }\n}\n"]}