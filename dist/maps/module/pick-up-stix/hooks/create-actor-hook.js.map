{"version":3,"sources":["module/pick-up-stix/hooks/create-actor-hook.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,GAAG,EAAE,wBAAqB;AACnC,OAAO,EAAE,UAAU,EAAE,0BAAuB;AAC5C,OAAO,EAAE,eAAe,EAAE,mBAAgB;AAE1C,MAAM,CAAC,MAAM,eAAe,GAAG,KAAK,EAAE,KAAY,EAAE,MAAc,EAAE,EAAE;IACrE,GAAG,CAAC,oDAAoD,CAAC,CAAC;IAC1D,GAAG,CAAC,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC;IACrB,MAAM,OAAO,GAAG;QACf,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;YACvD,GAAG,EAAE,SAAS,CAAC,EAAE;YACjB,KAAK,EAAE;gBACN,cAAc,EAAE;oBACf,cAAc,EAAE;wBACf,KAAK,EAAE,KAAK,CAAC,EAAE;qBACf;iBACD;aACD;SACD,CAAC,CAAC;KACH,CAAC;IAEF,IAAI,CAAC,UAAU,EAAE,EAAE;QAClB,GAAG,CAAC,uDAAuD,CAAC,CAAC;QAC7D,OAAO;KACN;IAEF,MAAM,eAAe,CAAC,KAAK,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;AAC1C,CAAC,CAAA","file":"../../../../module/pick-up-stix/hooks/create-actor-hook.js","sourcesContent":["import { log } from \"../../../log\";\r\nimport { amIFirstGm } from \"../../../utils\";\r\nimport { updateOwnedItem } from \"../main\";\r\n\r\nexport const createActorHook = async (actor: Actor, userId: string) => {\r\n\tlog(`pick-up-stix | createActorHook | called with args:`);\r\n\tlog([actor, userId]);\r\n\tconst updates = [\r\n\t\t...Object.values(actor.items.entries).map(ownedItem => ({\r\n\t\t\t_id: ownedItem.id,\r\n\t\t\tflags: {\r\n\t\t\t\t'pick-up-stix': {\r\n\t\t\t\t\t'pick-up-stix': {\r\n\t\t\t\t\t\towner: actor.id\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}))\r\n\t];\r\n\r\n\tif (!amIFirstGm()) {\r\n\t\tlog(`pick-up-stix | createActorHook | User is not first GM`);\r\n\t\treturn;\r\n  }\r\n\r\n\tawait updateOwnedItem(actor.id, updates);\r\n}\r\n"]}