{"version":3,"sources":["module/pick-up-stix/hooks/loot-token-created-hook.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,GAAG,EAAE,wBAAqB;AACnC,OAAO,EAAE,eAAe,EAAE,YAAY,EAAE,mBAAgB;AACxD,OAAO,EAAE,SAAS,EAAE,uBAAoB;AAExC,MAAM,CAAC,MAAM,oBAAoB,GAAG,KAAK,EAAE,OAAO,EAAE,EAAE;IACpD,GAAG,CAAC,sCAAsC,CAAC,CAAC;IAC5C,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;IAEf,MAAM,KAAK,GAAU,SAAS,EAAE,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,OAAO,CAAC,CAAC;IAE/E,IAAI,KAAK,EAAE;QACT,MAAM,MAAM,GAAW,KAAK,CAAC,OAAO,CAAC,cAAc,EAAE,qBAAqB,CAAC,CAAC;QAC5E,IAAI,SAAS,GAAG,YAAY,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAE/D,IAAI,CAAC,SAAS,EAAE;YACd,GAAG,CAAC,0FAA0F,CAAC,CAAC;YAChG,SAAS,GAAG,MAAM,eAAe,CAAC,OAAO,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;SAC3D;QAED,SAAS,EAAE,iBAAiB,EAAE,CAAC;KAChC;AACH,CAAC,CAAA","file":"../../../../module/pick-up-stix/hooks/loot-token-created-hook.js","sourcesContent":["import { log } from \"../../../log\";\nimport { createLootToken, getLootToken } from \"../main\";\nimport { getCanvas } from \"../settings\";\n\nexport const lootTokenCreatedHook = async (tokenId) => {\n  log(`pick-up-stix | lootTokenCreatedHook:`);\n  log([tokenId]);\n\n  const token: Token = getCanvas().tokens.placeables.find(p => p.id === tokenId);\n\n  if (token) {\n    const itemId = <string>token.getFlag('pick-up-stix', 'pick-up-stix.itemId');\n    let lootToken = getLootToken({ itemId: itemId, tokenId })?.[0];\n\n    if (!lootToken) {\n      log(`pick-up-stix | lootTokenCreatedHook | No LootToken instance found for created loot token`);\n      lootToken = await createLootToken(tokenId, itemId, false);\n    }\n\n    lootToken?.activateListeners();\n  }\n}\n"]}