{"version":3,"sources":["pick-up-stix.ts"],"names":[],"mappings":"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","file":"../pick-up-stix.js","sourcesContent":["import { canvasReadyHook } from \"./module/pick-up-stix/hooks/canvas-ready-hook\";\nimport { createActorHook } from \"./module/pick-up-stix/hooks/create-actor-hook\";\nimport { createItemHook as createItemHook } from \"./module/pick-up-stix/hooks/create-item-hook\";\nimport { initHook } from \"./module/pick-up-stix/hooks/init-hook\";\nimport { readyHook } from \"./module/pick-up-stix/hooks/ready-hook\";\nimport { preCreateItemHook } from \"./module/pick-up-stix/hooks/pre-create-item-hook\";\nimport { onRenderLootHud } from \"./module/pick-up-stix/hooks/render-loot-hud-hook\";\nimport { getCanvas } from \"./module/pick-up-stix/settings\";\nimport { deleteTokenHook } from \"./module/pick-up-stix/hooks/delete-token-hook\";\nimport { lootTokenCreatedHook } from \"./module/pick-up-stix/hooks/loot-token-created-hook\";\nimport { LootHud } from \"./module/pick-up-stix/loot-hud-application\";\nimport { updateItemHook } from \"./module/pick-up-stix/hooks/update-item-hook\";\nimport { deleteItemHook } from \"./module/pick-up-stix/hooks/delete-item-hook\";\nimport { preUpdateItemHook } from \"./module/pick-up-stix/hooks/pre-update-item-hook\";\nimport { renderItemDirectoryHook } from \"./module/pick-up-stix/hooks/render-item-directory-hook\";\nimport { preUpdateTokenHook } from \"./module/pick-up-stix/hooks/pre-update-token-hook\";\nimport { log } from \"./log\";\nimport { PickUpStixHooks } from \"./module/pick-up-stix/models\";\nimport { makeContainerApi } from './module/pick-up-stix/main';\n\n// game startup hooks\nHooks.once('init', initHook);\nHooks.once('canvasReady', () => {\n  //@ts-ignore\n  getCanvas().hud.pickUpStixLootHud = new LootHud();\n});\nHooks.on('canvasReady', canvasReadyHook);\nHooks.on('ready', readyHook);\n\n// item hooks\nHooks.on('preCreateItem', preCreateItemHook);\nHooks.on('createItem', createItemHook);\nHooks.on('preUpdateItem', preUpdateItemHook);\nHooks.on('updateItem', updateItemHook);\nHooks.on('deleteItem', deleteItemHook);\n\n// directory hooks\nHooks.on('renderItemDirectory', renderItemDirectoryHook);\n\n// actor hooks\nHooks.on('createActor', createActorHook);\n\n// token hooks\nHooks.on('deleteToken', deleteTokenHook);\nHooks.on('preUpdateToken', preUpdateTokenHook);\n\n\n// render hooks\nHooks.on(\"renderSettingsConfig\", (app, html, user) => {\n  // processHtml(html); // MOD 4535992 removed because filePicker is integrated on foundryvtt 0.8.6\n});\nHooks.on('renderLootHud', onRenderLootHud);\n\nHooks.on(PickUpStixHooks.lootTokenCreated, lootTokenCreatedHook);\n\nHooks.once('ready', () => {\n  log('pick-up-stix | ready once hook');\n\n  if (game.system.id === 'dnd5e') {\n    Hooks.on('renderItemSheet5e', (app, protoHtml, data) => {\n      log(`pick-up-stix | renderItemSheet5e`);\n      log([app, protoHtml, data]);\n\n      const item: Item = app.object;\n\n      // can't edit the size of owned items\n      if (item.actor) return;\n\n      let html = protoHtml;\n\n      if (html[0].localName !== \"div\") {\n        html = $(html[0].parentElement.parentElement);\n      }\n\n      const content = `\n      <div class=\"form-group\">\n        <label>Width</label>\n        <input type=\"text\" name=\"flags.pick-up-stix.pick-up-stix.tokenData.width\" value=\"${item.data.flags?.['pick-up-stix']?.['pick-up-stix']?.tokenData?.width ?? 1}\" data-dtype=\"Number\">\n      </div>\n\n      <div class=\"form-group\">\n        <label>Height</label>\n        <input type=\"text\" name=\"flags.pick-up-stix.pick-up-stix.tokenData.height\" value=\"${item.data.flags?.['pick-up-stix']?.['pick-up-stix']?.tokenData?.height ?? 1}\" data-dtype=\"Number\">\n      </div>\n    `\n      $(html)\n        .find('div.item-properties div.form-group')\n        .last()\n        .after(content);\n    });\n  }\n  if (game.user.isGM) {\n    //@ts-ignore\n    game.modules.get('pick-up-stix').apis = {};\n    //@ts-ignore\n    game.modules.get('pick-up-stix').apis.v = 1;\n    //@ts-ignore\n\t\tgame.modules.get('pick-up-stix').apis.makeContainer = makeContainerApi;\n\t}\n});\n"]}